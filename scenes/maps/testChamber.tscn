[gd_scene load_steps=33 format=2]

[ext_resource path="res://scenes/npc/player.tscn" type="PackedScene" id=1]
[ext_resource path="res://scenes/props/skybox.tscn" type="PackedScene" id=2]
[ext_resource path="res://scripts/skyboxCamera.gd" type="Script" id=3]
[ext_resource path="res://imports/latest.tscn" type="PackedScene" id=4]
[ext_resource path="res://scripts/storeItem.gd" type="Script" id=5]
[ext_resource path="res://scripts/superMarketAdmin.gd" type="Script" id=6]
[ext_resource path="res://scripts/stateController.gd" type="Script" id=7]
[ext_resource path="res://scripts/figure.gd" type="Script" id=8]
[ext_resource path="res://scripts/bed.gd" type="Script" id=9]
[ext_resource path="res://scripts/pcController.gd" type="Script" id=10]
[ext_resource path="res://scripts/storeClerk.gd" type="Script" id=11]
[ext_resource path="res://scripts/rainTrigger.gd" type="Script" id=12]
[ext_resource path="res://scripts/prop.gd" type="Script" id=13]
[ext_resource path="res://scripts/trigger.gd" type="Script" id=14]

[sub_resource type="SpatialMaterial" id=11]
flags_transparent = true
albedo_color = Color( 0, 0.243137, 0.972549, 0.545098 )

[sub_resource type="PlaneMesh" id=10]
material = SubResource( 11 )

[sub_resource type="BoxShape" id=15]
extents = Vector3( 0.870442, 0.528106, 1.576 )

[sub_resource type="CubeMesh" id=17]

[sub_resource type="BoxShape" id=1]
extents = Vector3( 0.132825, 0.252397, 0.195931 )

[sub_resource type="CubeMesh" id=13]
size = Vector3( 0.2, 0.2, 0.2 )

[sub_resource type="CubeMesh" id=19]

[sub_resource type="BoxShape" id=21]

[sub_resource type="CubeMesh" id=23]

[sub_resource type="BoxShape" id=20]

[sub_resource type="CubeMesh" id=22]

[sub_resource type="BoxShape" id=24]
extents = Vector3( 1, 1.5452, 1 )

[sub_resource type="BoxShape" id=14]
extents = Vector3( 1.55719, 1, 1.01134 )

[sub_resource type="BoxShape" id=25]
extents = Vector3( 0.770279, 1, 1 )

[sub_resource type="BoxShape" id=26]
extents = Vector3( 1.68485, 1, 1 )

[sub_resource type="BoxShape" id=27]

[sub_resource type="CubeMesh" id=28]

[sub_resource type="Environment" id=3]
ambient_light_color = Color( 1, 1, 1, 1 )
ambient_light_energy = 0.8
fog_depth_begin = 5.0
fog_depth_end = 50.0
fog_depth_curve = 1.1487

[node name="testChamber" type="Spatial"]
script = ExtResource( 7 )

[node name="ViewportContainer" type="ViewportContainer" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Viewport" type="Viewport" parent="ViewportContainer"]
size = Vector2( 320, 240 )
transparent_bg = true
handle_input_locally = false
render_target_update_mode = 3

[node name="skybox2" parent="ViewportContainer/Viewport" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0211499, -23.8912, -0.17873 )

[node name="aurora" type="MeshInstance" parent="ViewportContainer/Viewport/skybox2"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, -0.2, 0, 1, -8.74228e-09, 0, 2.25726, -1.07334 )
layers = 256
mesh = SubResource( 10 )

[node name="player" parent="ViewportContainer/Viewport" instance=ExtResource( 1 )]
unique_name_in_owner = true
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 36.9091, 0.960906, 50.4676 )

[node name="map" type="Spatial" parent="ViewportContainer/Viewport"]

[node name="city1" parent="ViewportContainer/Viewport/map" instance=ExtResource( 4 )]

[node name="interactableProps" type="Spatial" parent="ViewportContainer/Viewport/map"]

[node name="desktopPC" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 32.9464, 0.775902, 49.5764 )
collision_layer = 4
collision_mask = 0
script = ExtResource( 10 )
propName = "PC"
hasCustomMethod = true
methodName = "pcInteraction"

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/desktopPC"]
shape = SubResource( 15 )

[node name="MeshInstance" type="MeshInstance" parent="ViewportContainer/Viewport/map/interactableProps/desktopPC"]
transform = Transform( 0.852941, 0, 0, 0, 0.771522, 0, 0, 0, 1.55514, 0, 0, 0 )
mesh = SubResource( 17 )

[node name="figure1" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps" groups=["figures"]]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -17.4441, 0.896692, 11.1247 )
collision_layer = 4
collision_mask = 0
script = ExtResource( 8 )
propName = "figure 1"
haspickup = true
deleteOnPickup = true
hasDialogue = true
dialogues = [ "d1o2" ]
hasCustomMethod = true
methodName = "figureUpdate"
figureID = 1

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/figure1"]
shape = SubResource( 1 )

[node name="MeshInstance" type="MeshInstance" parent="ViewportContainer/Viewport/map/interactableProps/figure1"]
mesh = SubResource( 13 )

[node name="figure2" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps" groups=["figures"]]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -17.4441, 0.896692, 10.4636 )
collision_layer = 4
script = ExtResource( 8 )
propName = "figure 2"
haspickup = true
deleteOnPickup = true
hasDialogue = true
dialogues = [ "d1o2" ]
hasCustomMethod = true
methodName = "figureUpdate"
figureID = 2

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/figure2"]
shape = SubResource( 1 )

[node name="MeshInstance" type="MeshInstance" parent="ViewportContainer/Viewport/map/interactableProps/figure2"]
mesh = SubResource( 13 )

[node name="figure3" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps" groups=["figures"]]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -17.4441, 0.896692, 9.83813 )
collision_layer = 4
script = ExtResource( 8 )
propName = "figure 3"
haspickup = true
deleteOnPickup = true
hasDialogue = true
dialogues = [ "d1o2" ]
hasCustomMethod = true
methodName = "figureUpdate"
figureID = 3

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/figure3"]
shape = SubResource( 1 )

[node name="MeshInstance" type="MeshInstance" parent="ViewportContainer/Viewport/map/interactableProps/figure3"]
mesh = SubResource( 13 )

[node name="bed" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 39.1538, 0.497966, 50.5802 )
collision_layer = 4
collision_mask = 0
script = ExtResource( 9 )
propName = "bed"
hasDialogue = true
dialogues = [ "bedDisabled", "bedEnabled" ]

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/bed"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.029785, 0 )
shape = SubResource( 15 )

[node name="MeshInstance" type="MeshInstance" parent="ViewportContainer/Viewport/map/interactableProps/bed"]
transform = Transform( 0.836511, 0, 0, 0, 0.475389, 0, 0, 0, 1.52638, 0, 0, 0 )
mesh = SubResource( 19 )

[node name="superMarket" type="Spatial" parent="ViewportContainer/Viewport/map/interactableProps"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 18.6774, 0, -18.4881 )
script = ExtResource( 6 )

[node name="storeClerk" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps/superMarket"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 7.04222, 0.801139, 6.13246 )
collision_layer = 4
collision_mask = 0
script = ExtResource( 11 )
propName = "store clerk"
hasDialogue = true
dialogues = [ "storeClerk", "d2o2" ]
hasCustomMethod = true
methodName = "taskDone"

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/superMarket/storeClerk"]
shape = SubResource( 21 )

[node name="MeshInstance" type="MeshInstance" parent="ViewportContainer/Viewport/map/interactableProps/superMarket/storeClerk"]
mesh = SubResource( 23 )

[node name="storeItem1" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps/superMarket"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -6.58533, 0.550353, -3.2051 )
collision_layer = 4
collision_mask = 0
script = ExtResource( 5 )
propName = "store item 1"
haspickup = true
hasDialogue = true
dialogues = [ "d2o1" ]
hasCustomMethod = true
methodName = "storeItemUpdate"

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/superMarket/storeItem1"]
shape = SubResource( 20 )

[node name="MeshInstance" type="MeshInstance" parent="ViewportContainer/Viewport/map/interactableProps/superMarket/storeItem1"]
mesh = SubResource( 22 )

[node name="storeItem2" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps/superMarket"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -6.72707, 0.550353, 0.235315 )
collision_layer = 4
collision_mask = 0
script = ExtResource( 5 )
propName = "store item 2"
haspickup = true
hasDialogue = true
dialogues = [ "d2o1" ]
hasCustomMethod = true
methodName = "storeItemUpdate"

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/superMarket/storeItem2"]
shape = SubResource( 20 )

[node name="MeshInstance" type="MeshInstance" parent="ViewportContainer/Viewport/map/interactableProps/superMarket/storeItem2"]
mesh = SubResource( 22 )

[node name="storeItem3" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps/superMarket"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -6.98979, 0.550353, 3.37104 )
collision_layer = 4
collision_mask = 0
script = ExtResource( 5 )
propName = "store item 2"
haspickup = true
hasDialogue = true
dialogues = [ "d2o1" ]
hasCustomMethod = true
methodName = "storeItemUpdate"

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/superMarket/storeItem3"]
shape = SubResource( 20 )

[node name="MeshInstance" type="MeshInstance" parent="ViewportContainer/Viewport/map/interactableProps/superMarket/storeItem3"]
mesh = SubResource( 22 )

[node name="storeItem4" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps/superMarket"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -7.16724, 0.550353, 6.34225 )
collision_layer = 4
collision_mask = 0
script = ExtResource( 5 )
propName = "store item 3"
haspickup = true
hasDialogue = true
dialogues = [ "d2o1" ]
hasCustomMethod = true
methodName = "storeItemUpdate"

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/superMarket/storeItem4"]
shape = SubResource( 20 )

[node name="MeshInstance" type="MeshInstance" parent="ViewportContainer/Viewport/map/interactableProps/superMarket/storeItem4"]
mesh = SubResource( 22 )

[node name="day3" type="Spatial" parent="ViewportContainer/Viewport/map/interactableProps"]

[node name="doorStop" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps/day3"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 42, 1.5184, 47 )
script = ExtResource( 13 )
propName = "rain block"
hasDialogue = true
dialogues = [ "day3Rain" ]

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/day3/doorStop"]
shape = SubResource( 24 )

[node name="trigger" type="Area" parent="ViewportContainer/Viewport/map/interactableProps/day3"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 42.0526, 0.679826, 49.0051 )
collision_layer = 0
collision_mask = 16
script = ExtResource( 12 )
hasDialogue = true
dialogues = [ "d3o1" ]
customMethod = true

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/day3/trigger"]
shape = SubResource( 14 )

[node name="startTrigger" type="Area" parent="ViewportContainer/Viewport/map/interactableProps"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 38.9759, 0.545448, 54.034 )
collision_layer = 0
collision_mask = 16
script = ExtResource( 14 )
propName = "intro trigger"
hasDialogue = true
dialogues = [ "d1o1" ]
selfDisable = true

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/startTrigger"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.982117, 0, 0 )
shape = SubResource( 25 )

[node name="day2Intro" type="Area" parent="ViewportContainer/Viewport/map/interactableProps"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 41.0317, 0.545448, 51.6251 )
collision_layer = 0
collision_mask = 16
script = ExtResource( 14 )
propName = "day 2 intro"
hasDialogue = true
dialogues = [ "d2Intro" ]
selfDisable = true

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/day2Intro"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.982117, 0, 0 )
shape = SubResource( 26 )

[node name="comicStoreClerk" type="StaticBody" parent="ViewportContainer/Viewport/map/interactableProps"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -14.2769, 0.851461, 14.8071 )
collision_layer = 4
collision_mask = 0
script = ExtResource( 13 )
propName = "Comic Store clerk"
hasDialogue = true
dialogues = [ "comicStoreClerk" ]

[node name="CollisionShape" type="CollisionShape" parent="ViewportContainer/Viewport/map/interactableProps/comicStoreClerk"]
shape = SubResource( 27 )

[node name="MeshInstance" type="MeshInstance" parent="ViewportContainer/Viewport/map/interactableProps/comicStoreClerk"]
mesh = SubResource( 28 )

[node name="skyboxCamera" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -22.0863, -0.0790062 )
cull_mask = 256
script = ExtResource( 3 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 3 )

[connection signal="body_entered" from="ViewportContainer/Viewport/map/interactableProps/day3/trigger" to="ViewportContainer/Viewport/map/interactableProps/day3/trigger" method="_on_trigger_body_entered"]
[connection signal="body_entered" from="ViewportContainer/Viewport/map/interactableProps/startTrigger" to="ViewportContainer/Viewport/map/interactableProps/startTrigger" method="_on_trigger_body_entered"]
[connection signal="body_entered" from="ViewportContainer/Viewport/map/interactableProps/day2Intro" to="ViewportContainer/Viewport/map/interactableProps/day2Intro" method="_on_trigger_body_entered"]
